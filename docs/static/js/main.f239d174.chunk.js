(this["webpackJsonpbluetooth-test"]=this["webpackJsonpbluetooth-test"]||[]).push([[0],{19:function(e,t,r){},21:function(e,t,r){},23:function(e,t,r){"use strict";r.r(t);var n,a=r(8),i=r.n(a),u=r(12),c=r.n(u),s=(r(19),r(0)),o=r.n(s),f=r(14),h=r(1),p=(r(21),r(2)),l=r(3),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Object(p.a)(this,e),this.concurrent=t,this.queue=[],this.running=0}return Object(l.a)(e,[{key:"pump",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.running>=this.concurrent)){e.next=2;break}return e.abrupt("return");case 2:if(t=this.queue.shift()){e.next=5;break}return e.abrupt("return");case 5:return this.running++,e.prev=6,e.next=9,t.fn();case 9:r=e.sent,t.resolve(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),t.reject(e.t0);case 16:return this.running--,e.abrupt("return",this.pump());case 18:case"end":return e.stop()}}),e,this,[[6,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"add",value:function(e){var t=this;return new Promise((function(r,n){return t.queue.push({fn:e,resolve:r,reject:n}),t.pump()}))}}]),e}(),d=function(){function e(t,r){Object(p.a)(this,e),this.service=t,this.emitter=r,this.characteristics=void 0}return Object(l.a)(e,[{key:"getCharacteristic",value:function(){var e=Object(h.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.characteristics){e.next=4;break}return e.next=3,this.service.getCharacteristics();case 3:this.characteristics=e.sent;case 4:return e.abrupt("return",this.characteristics.find((function(e){return e.uuid===t})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCharacteristicValue",value:function(){var t=Object(h.a)(o.a.mark((function t(r){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCharacteristic(r);case 2:if(n=t.sent){t.next=5;break}throw new Error("Unable to locate characteristic");case 5:return t.next=7,e.queue.add(Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.readValue());case 1:case"end":return e.stop()}}),e)}))));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setCharacteristicValue",value:function(){var t=Object(h.a)(o.a.mark((function t(r,n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCharacteristic(r);case 2:if(a=t.sent){t.next=5;break}throw new Error("Unable to locate characteristic");case 5:return t.next=7,e.queue.add(Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.writeValue(n));case 1:case"end":return e.stop()}}),e)}))));case 7:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"handleListener",value:function(){var t=Object(h.a)(o.a.mark((function t(r,n,a){var i,u=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCharacteristic(n);case 2:if(i=t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.queue.add(Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.startNotifications());case 1:case"end":return e.stop()}}),e)}))));case 7:this.emitter.on("newListener",(function(t){if(!(t!==r||u.emitter.listenerCount(r)>0))return e.queue.add(Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.addEventListener("characteristicvaluechanged",a));case 1:case"end":return e.stop()}}),e)}))))})),this.emitter.on("removeListener",(function(t){if(!(t!==r||u.emitter.listenerCount(r)>0))return e.queue.add(Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.removeEventListener("characteristicvaluechanged",a));case 1:case"end":return e.stop()}}),e)}))))}));case 9:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}()}]),e}();d.queue=new v,function(e){e.modelNumber="00002a24-0000-1000-8000-00805f9b34fb",e.serialNumber="00002a25-0000-1000-8000-00805f9b34fb",e.firmwareRevision="00002a26-0000-1000-8000-00805f9b34fb",e.hardwareRevision="00002a27-0000-1000-8000-00805f9b34fb",e.manufacturer="00002a29-0000-1000-8000-00805f9b34fb"}(n||(n={}));var b=function(){function e(t){Object(p.a)(this,e),this.helper=void 0,this.helper=new d(t)}return Object(l.a)(e,[{key:"readDeviceInformation",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t,r,a,i,u,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,this.readStringCharacteristic(n.modelNumber);case 3:return(r=e.sent)&&(t.modelNumber=r),e.next=7,this.readStringCharacteristic(n.serialNumber);case 7:return(a=e.sent)&&(t.serialNumber=a),e.next=11,this.readStringCharacteristic(n.firmwareRevision);case 11:return(i=e.sent)&&(t.firmwareRevision=i),e.next=15,this.readStringCharacteristic(n.hardwareRevision);case 15:return(u=e.sent)&&(t.hardwareRevision=u),e.next=19,this.readStringCharacteristic(n.manufacturer);case 19:return(c=e.sent)&&(t.manufacturer=c),e.abrupt("return",t);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readStringCharacteristic",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.helper.getCharacteristicValue(t);case 3:return r=e.sent,n=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength),e.abrupt("return",String.fromCharCode.apply(null,Array.from(new Uint8Array(n))));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"create",value:function(){var t=Object(h.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new e(r));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();b.uuid="0000180a-0000-1000-8000-00805f9b34fb";var m,w,g=r(4),y=r(6),x=r(5),k=r(10),j=r(9),O=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).isEventListenerObject=function(e){return void 0!==e.handleEvent},e}return Object(l.a)(r,[{key:"addEventListener",value:function(e,t){if(t){var n=this.isEventListenerObject(t)?t.handleEvent:t;Object(k.a)(Object(j.a)(r.prototype),"addListener",this).call(this,e,n)}}},{key:"removeEventListener",value:function(e,t){if(t){var n=this.isEventListenerObject(t)?t.handleEvent:t;Object(k.a)(Object(j.a)(r.prototype),"removeListener",this).call(this,e,n)}}},{key:"dispatchEvent",value:function(e,t){var n;return n="string"===typeof e?new CustomEvent(e,{detail:t}):e,Object(k.a)(Object(j.a)(r.prototype),"emit",this).call(this,n.type,n)}}]),r}(r(13).EventEmitter);!function(e){e.buttonAState="e95dda90-251d-470a-a062-fa1922dfa9a8",e.buttonBState="e95dda91-251d-470a-a062-fa1922dfa9a8"}(m||(m={})),function(e){e[e.Release=0]="Release",e[e.ShortPress=1]="ShortPress",e[e.LongPress=2]="LongPress"}(w||(w={}));var C,S=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this)).helper=void 0,n.helper=new d(e,Object(g.a)(n)),n}return Object(l.a)(r,[{key:"init",value:function(){var e=Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.handleListener("buttonastatechanged",m.buttonAState,this.buttonAStateChangedHandler.bind(this));case 2:return e.next=4,this.helper.handleListener("buttonbstatechanged",m.buttonBState,this.buttonBStateChangedHandler.bind(this));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readButtonAState",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(m.buttonAState);case 2:return t=e.sent,e.abrupt("return",t.getUint8(0));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readButtonBState",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(m.buttonBState);case 2:return t=e.sent,e.abrupt("return",t.getUint8(0));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buttonAStateChangedHandler",value:function(e){var t=e.target.value;this.dispatchEvent("buttonastatechanged",t.getUint8(0))}},{key:"buttonBStateChangedHandler",value:function(e){var t=e.target.value;this.dispatchEvent("buttonbstatechanged",t.getUint8(0))}}],[{key:"create",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new r(t),e.next=3,n.init();case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(O);S.uuid="e95d9882-251d-470a-a062-fa1922dfa9a8",function(e){e.ledMatrixState="e95d7b77-251d-470a-a062-fa1922dfa9a8",e.ledText="e95d93ee-251d-470a-a062-fa1922dfa9a8",e.scrollingDelay="e95d0d2d-251d-470a-a062-fa1922dfa9a8"}(C||(C={}));var V,D=function(){function e(t){Object(p.a)(this,e),this.helper=void 0,this.helper=new d(t)}return Object(l.a)(e,[{key:"writeText",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.encodeString(t),e.abrupt("return",this.helper.setCharacteristicValue(C.ledText,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readMatrixState",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(C.ledMatrixState);case 2:return t=e.sent,e.abrupt("return",this.viewToLedMatrix(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"writeMatrixState",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.ledMatrixToView(t),e.abrupt("return",this.helper.setCharacteristicValue(C.ledMatrixState,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScrollingDelay",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(C.scrollingDelay);case 2:return t=e.sent,e.abrupt("return",t.getUint16(0,!0));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setScrollingDelay",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new DataView(new ArrayBuffer(2))).setUint16(0,t,!0),e.abrupt("return",this.helper.setCharacteristicValue(C.scrollingDelay,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"encodeString",value:function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"viewToLedMatrix",value:function(e){for(var t=[],r=0;r<5;r++)t[r]=this.byteToBoolArray(e.getUint8(r));return t}},{key:"byteToBoolArray",value:function(e){for(var t=[!1,!1,!1,!1,!1],r=0;r<t.length;r++)t[r]=1===(1&e),e>>=1;return t.reverse()}},{key:"ledMatrixToView",value:function(e){for(var t=new DataView(new ArrayBuffer(5)),r=0;r<5;r++)t.setUint8(r,this.boolArrayToByte(e[r]));return t}},{key:"boolArrayToByte",value:function(e){return e.reduce((function(e,t){return e<<1|(t?1:0)}),0)}}],[{key:"create",value:function(){var t=Object(h.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new e(r));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();D.uuid="e95dd91d-251d-470a-a062-fa1922dfa9a8",function(e){e.temperature="e95d9250-251d-470a-a062-fa1922dfa9a8",e.temperaturePeriod="e95d1b25-251d-470a-a062-fa1922dfa9a8"}(V||(V={}));var A,E=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this)).helper=void 0,n.helper=new d(e,Object(g.a)(n)),n}return Object(l.a)(r,[{key:"init",value:function(){var e=Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.handleListener("temperaturechanged",V.temperature,this.temperatureChangedHandler.bind(this));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readTemperature",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(V.temperature);case 2:return t=e.sent,e.abrupt("return",t.getInt8(0));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTemperaturePeriod",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(V.temperaturePeriod);case 2:return t=e.sent,e.abrupt("return",t.getUint16(0,!0));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setTemperaturePeriod",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new DataView(new ArrayBuffer(2))).setUint16(0,t,!0),e.next=4,this.helper.setCharacteristicValue(V.temperaturePeriod,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"temperatureChangedHandler",value:function(e){var t=e.target.value;this.dispatchEvent("temperaturechanged",t.getInt8(0))}}],[{key:"create",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new r(t),e.next=3,n.init();case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(O);E.uuid="e95d6100-251d-470a-a062-fa1922dfa9a8",function(e){e.accelerometerData="e95dca4b-251d-470a-a062-fa1922dfa9a8",e.accelerometerPeriod="e95dfb24-251d-470a-a062-fa1922dfa9a8"}(A||(A={}));var T,B,U=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this)).helper=void 0,n.helper=new d(e,Object(g.a)(n)),n}return Object(l.a)(r,[{key:"init",value:function(){var e=Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.handleListener("accelerometerdatachanged",A.accelerometerData,this.accelerometerDataChangedHandler.bind(this));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readAccelerometerData",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(A.accelerometerData);case 2:return t=e.sent,e.abrupt("return",this.dataViewToAccelerometerData(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccelerometerPeriod",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(A.accelerometerPeriod);case 2:return t=e.sent,e.abrupt("return",t.getUint16(0,!0));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setAccelerometerPeriod",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new DataView(new ArrayBuffer(2))).setUint16(0,t,!0),e.abrupt("return",this.helper.setCharacteristicValue(A.accelerometerPeriod,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"accelerometerDataChangedHandler",value:function(e){var t=e.target.value,r=this.dataViewToAccelerometerData(t);this.dispatchEvent("accelerometerdatachanged",r)}},{key:"dataViewToAccelerometerData",value:function(e){return{x:e.getInt16(0,!0)/1e3,y:e.getInt16(2,!0)/1e3,z:e.getInt16(4,!0)/1e3}}}],[{key:"create",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new r(t),e.next=3,n.init();case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(O);U.uuid="e95d0753-251d-470a-a062-fa1922dfa9a8",function(e){e.magnetometerData="e95dfb11-251d-470a-a062-fa1922dfa9a8",e.magnetometerPeriod="e95d386c-251d-470a-a062-fa1922dfa9a8",e.magnetometerBearing="e95d9715-251d-470a-a062-fa1922dfa9a8",e.magnetometerCalibration="e95db358-251d-470a-a062-fa1922dfa9a8"}(T||(T={})),function(e){e[e.unknown=0]="unknown",e[e.requested=1]="requested",e[e.completed=2]="completed",e[e.errored=3]="errored"}(B||(B={}));var L,P=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this)).helper=void 0,n.helper=new d(e,Object(g.a)(n)),n}return Object(l.a)(r,[{key:"init",value:function(){var e=Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.handleListener("magnetometerdatachanged",T.magnetometerData,this.magnetometerDataChangedHandler.bind(this));case 2:return e.next=4,this.helper.handleListener("magnetometerbearingchanged",T.magnetometerBearing,this.magnetometerBearingChangedHandler.bind(this));case 4:return e.next=6,this.helper.handleListener("magnetometercalibrationchanged",T.magnetometerCalibration,this.magnetometerCalibrationChangedHandler.bind(this));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calibrate",value:function(){var e=Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.helper.setCharacteristicValue(T.magnetometerCalibration,new Uint8Array([1])));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readMagnetometerData",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(T.magnetometerData);case 2:return t=e.sent,e.abrupt("return",this.dataViewToMagnetometerData(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readMagnetometerBearing",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(T.magnetometerBearing);case 2:if(2!==(t=e.sent).byteLength){e.next=5;break}return e.abrupt("return",t.getUint16(0,!0));case 5:return e.abrupt("return",void 0);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMagnetometerPeriod",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(T.magnetometerPeriod);case 2:return t=e.sent,e.abrupt("return",t.getUint16(0,!0));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setMagnetometerPeriod",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new DataView(new ArrayBuffer(2))).setUint16(0,t,!0),e.abrupt("return",this.helper.setCharacteristicValue(T.magnetometerPeriod,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"magnetometerDataChangedHandler",value:function(e){var t=e.target.value,r=this.dataViewToMagnetometerData(t);this.dispatchEvent("magnetometerdatachanged",r)}},{key:"magnetometerBearingChangedHandler",value:function(e){var t=e.target.value;2===t.byteLength&&this.dispatchEvent("magnetometerbearingchanged",t.getUint16(0,!0))}},{key:"magnetometerCalibrationChangedHandler",value:function(e){var t=e.target.value;1===t.byteLength&&this.dispatchEvent("magnetometercalibrationchanged",t.getUint8(0))}},{key:"dataViewToMagnetometerData",value:function(e){return{x:e.getInt16(0,!0),y:e.getInt16(1,!0),z:e.getInt16(2,!0)}}}],[{key:"create",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new r(t),e.next=3,n.init();case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(O);P.uuid="e95df2d8-251d-470a-a062-fa1922dfa9a8",function(e){e.pinData="e95d8d00-251d-470a-a062-fa1922dfa9a8",e.pinAdConfiguration="e95d5899-251d-470a-a062-fa1922dfa9a8",e.pinIoConfiguration="e95db9fe-251d-470a-a062-fa1922dfa9a8",e.pwmControl="e95dd822-251d-470a-a062-fa1922dfa9a8"}(L||(L={}));var M,q,H=!0;!function(e){e[e.Digital=0]="Digital",e[e.Analogue=1]="Analogue"}(M||(M={})),function(e){e[e.Output=0]="Output",e[e.Input=1]="Input"}(q||(q={}));var R,I=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this)).helper=void 0,n.helper=new d(e,Object(g.a)(n)),n}return Object(l.a)(r,[{key:"init",value:function(){var e=Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.handleListener("pindatachanged",L.pinData,this.pinDataChangedHandler.bind(this));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readPinData",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(L.pinData);case 2:return t=e.sent,e.abrupt("return",this.dataViewToPinData(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"writePinData",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.pinDataToDataView(t),e.abrupt("return",this.helper.setCharacteristicValue(L.pinData,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAdConfiguration",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(L.pinAdConfiguration);case 2:return t=e.sent,e.abrupt("return",this.dataViewToConfig(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setAdConfiguration",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.configToDataView(t),e.abrupt("return",this.helper.setCharacteristicValue(L.pinAdConfiguration,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIoConfiguration",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(L.pinIoConfiguration);case 2:return t=e.sent,e.abrupt("return",this.dataViewToConfig(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setIoConfiguration",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.configToDataView(t),e.abrupt("return",this.helper.setCharacteristicValue(L.pinIoConfiguration,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setPwmControl",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.pwmControlDataToDataView(t),e.abrupt("return",this.helper.setCharacteristicValue(L.pwmControl,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pinDataChangedHandler",value:function(e){var t=e.target.value,r=this.dataViewToPinData(t);this.dispatchEvent("pindatachanged",r)}},{key:"dataViewToPinData",value:function(e){for(var t=[],r=0;r<e.byteLength;r+=2)t.push({pin:e.getUint8(r),value:e.getUint8(r+1)});return t}},{key:"pinDataToDataView",value:function(e){var t=new DataView(new ArrayBuffer(2*e.length));return e.forEach((function(e,r){t.setUint8(2*r,e.pin),t.setUint8(2*r+1,e.value)})),t}},{key:"dataViewToConfig",value:function(e){for(var t=[],r=(e.getUint16(0)<<8)+e.getUint8(2),n=0;n<24;n++)t.push(r>>n);return t}},{key:"configToDataView",value:function(e){for(var t=new DataView(new ArrayBuffer(3)),r=0,n=0;n<e.length;n++)r&=1<<e[n];return t.setUint16(0,r>>8,H),t.setUint8(2,255&r),t}},{key:"pwmControlDataToDataView",value:function(e){var t=new DataView(new ArrayBuffer(7));return t.setUint8(0,e.pin),t.setUint16(1,e.value,H),t.setUint32(3,e.period,H),t}}],[{key:"create",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new r(t),e.next=3,n.init();case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(O);I.uuid="e95d127b-251d-470a-a062-fa1922dfa9a8",function(e){e.tx="6e400002-b5a3-f393-e0a9-e50e24dcca9e",e.rx="6e400003-b5a3-f393-e0a9-e50e24dcca9e"}(R||(R={}));var N,F=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this)).helper=void 0,n.helper=new d(e,Object(g.a)(n)),n}return Object(l.a)(r,[{key:"init",value:function(){var e=Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.handleListener("receive",R.tx,this.receiveHandler.bind(this));case 2:return e.next=4,this.helper.handleListener("receiveText",R.tx,this.receiveTextHandler.bind(this));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=Object(h.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.helper.setCharacteristicValue(R.rx,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendText",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.split("").map((function(e){return e.charCodeAt(0)})),e.abrupt("return",this.helper.setCharacteristicValue(R.rx,new Uint8Array(r).buffer));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveHandler",value:function(e){var t=e.target.value,r=new Uint8Array(t.buffer);this.dispatchEvent("receive",r)}},{key:"receiveTextHandler",value:function(e){var t=e.target.value,r=Array.prototype.slice.call(new Uint8Array(t.buffer)),n=String.fromCharCode.apply(null,r);this.dispatchEvent("receiveText",n)}}],[{key:"create",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new r(t),e.next=3,n.init();case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(O);F.uuid="6e400001-b5a3-f393-e0a9-e50e24dcca9e",function(e){e.microBitRequirements="e95db84c-251d-470a-a062-fa1922dfa9a8",e.microBitEvent="e95d9775-251d-470a-a062-fa1922dfa9a8",e.clientRequirements="e95d23c4-251d-470a-a062-fa1922dfa9a8",e.clientEvent="e95d5404-251d-470a-a062-fa1922dfa9a8"}(N||(N={}));var X,Y=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this)).helper=void 0,n.helper=new d(e,Object(g.a)(n)),n}return Object(l.a)(r,[{key:"init",value:function(){var e=Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.handleListener("microbitevent",N.microBitEvent,this.eventHandler.bind(this));case 2:return e.next=4,this.helper.handleListener("microbitrequirementschanged",N.microBitRequirements,this.microbitRequirementsChangedHandler.bind(this));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMicrobitRequirements",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(N.microBitRequirements);case 2:return t=e.sent,e.abrupt("return",this.viewToMicrobitEvent(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setClientRequirements",value:function(){var e=Object(h.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new DataView(new ArrayBuffer(4))).setUint16(0,t,!0),n.setUint16(1,r,!0),e.next=5,this.helper.setCharacteristicValue(N.clientRequirements,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"readMicrobitEvent",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getCharacteristicValue(N.microBitEvent);case 2:return t=e.sent,e.abrupt("return",this.viewToMicrobitEvent(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"writeClientEvent",value:function(){var e=Object(h.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new DataView(new ArrayBuffer(4))).setUint16(0,t,!0),n.setUint16(1,r,!0),e.next=5,this.helper.setCharacteristicValue(N.clientEvent,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"microbitRequirementsChangedHandler",value:function(e){var t=e.target.value,r=this.viewToMicrobitEvent(t);this.dispatchEvent("microbitrequirementschanged",r)}},{key:"eventHandler",value:function(e){var t=e.target.value,r=this.viewToMicrobitEvent(t);this.dispatchEvent("microbitevent",r)}},{key:"viewToMicrobitEvent",value:function(e){return{type:e.getUint16(0,!0),value:e.getUint16(1,!0)}}}],[{key:"create",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new r(t),e.next=3,n.init();case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(O);Y.uuid="e95d93af-251d-470a-a062-fa1922dfa9a8",function(e){e.dfuControl="e95d93b1-251d-470a-a062-fa1922dfa9a8"}(X||(X={}));var Z=function(){function e(t){Object(p.a)(this,e),this.helper=void 0,this.helper=new d(t)}return Object(l.a)(e,[{key:"requestDfu",value:function(){return this.helper.setCharacteristicValue(X.dfuControl,new Uint8Array([1]))}},{key:"requestFlashCode",value:function(){return this.helper.setCharacteristicValue(X.dfuControl,new Uint8Array([2]))}}],[{key:"create",value:function(){var t=Object(h.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new e(r));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();Z.uuid="e95d93b0-251d-470a-a062-fa1922dfa9a8";var z=function(){function e(t){Object(p.a)(this,e),this.services=t}return Object(l.a)(e,[{key:"createService",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.services.find((function(e){return e.uuid===t.uuid}))){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,t.create(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),J=function(){var e=Object(h.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.requestDevice({filters:[{namePrefix:"BBC micro:bit"}],optionalServices:[b.uuid,S.uuid,D.uuid,E.uuid,U.uuid,P.uuid,I.uuid,F.uuid,Y.uuid,Z.uuid]});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(h.a)(o.a.mark((function e(t){var r,n,a,i,u,c,s,f,h,p,l,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.gatt){e.next=2;break}return e.abrupt("return",{});case 2:if(t.gatt.connected){e.next=5;break}return e.next=5,t.gatt.connect();case 5:return e.next=7,t.gatt.getPrimaryServices();case 7:return r=e.sent,n=new z(r),e.next=11,n.createService(b);case 11:return a=e.sent,e.next=14,n.createService(S);case 14:return i=e.sent,e.next=17,n.createService(D);case 17:return u=e.sent,e.next=20,n.createService(E);case 20:return c=e.sent,e.next=23,n.createService(U);case 23:return s=e.sent,e.next=26,n.createService(P);case 26:return f=e.sent,e.next=29,n.createService(F);case 29:return h=e.sent,e.next=32,n.createService(Y);case 32:return p=e.sent,e.next=35,n.createService(Z);case 35:return l=e.sent,e.next=38,n.createService(I);case 38:return v=e.sent,e.abrupt("return",{deviceInformationService:a,buttonService:i,ledService:u,temperatureService:c,accelerometerService:s,magnetometerService:f,uartService:h,eventService:p,dfuControlService:l,ioPinService:v});case 40:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=r(7);function Q(e){throw new Error(e)}function W(e){return e.toFixed(2).padStart(6," ")}function $(){return($=Object(h.a)(o.a.mark((function e(t,r){var n,a,i,u,c,s,f,h,p,l,v,d,b,m,w,g,y,x,k,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){var e=n.accX,r=n.accY,a=n.accZ,i=n.magX,u=n.magY,c=n.magZ,s=n.btnA,o=n.btnB,f=n.bear,h=n.temp;return t.innerText="A:(".concat(W(e),", ").concat(W(r),", ").concat(W(a),") M:(").concat(W(i),", ").concat(W(u),", ").concat(W(c),") C:").concat(f," T:").concat(h," B:(").concat(s,", ").concat(o,")")},n={accX:0,accY:0,accZ:0,magX:0,magY:0,magZ:0,bear:0,temp:0,btnA:0,btnB:0},a=r.getContext("2d"),i=r.height/2,u=0,c=0,e.prev=6,e.next=9,J(window.navigator.bluetooth);case 9:if(e.t1=f=e.sent,e.t0=null!==e.t1,!e.t0){e.next=13;break}e.t0=void 0!==f;case 13:if(!e.t0){e.next=17;break}e.t2=f,e.next=18;break;case 17:e.t2=Q("requestMicrobit failed");case 18:return x=e.t2,e.next=21,G(x);case 21:return k=e.sent,console.log(k),e.next=25,null===(h=k.deviceInformationService)||void 0===h?void 0:h.readDeviceInformation();case 25:return j=e.sent,console.log(j),null===(p=k.temperatureService)||void 0===p||p.setTemperaturePeriod(200),null===(l=k.temperatureService)||void 0===l||l.addEventListener("temperaturechanged",(function(e){n.temp=e.detail,s()})),null===(v=k.magnetometerService)||void 0===v||v.setMagnetometerPeriod(20),null===(d=k.magnetometerService)||void 0===d||d.addEventListener("magnetometerdatachanged",(function(e){var t=e.detail,u=t.x,o=t.y,f=t.z;u/=1e5,o/=1e5,f/=1e5,n.magX=u,n.magY=o,n.magZ=f,s();var h=Math.sqrt(u*u+o*o+f*f)*r.height/10;a.fillStyle="green",a.clearRect(c,0,3,i),a.fillRect(c,i-h,2,h),c=(c+2)%r.width})),null===(b=k.magnetometerService)||void 0===b||b.addEventListener("magnetometerbearingchanged",(function(e){n.bear=e.detail,s()})),null===(m=k.accelerometerService)||void 0===m||m.setAccelerometerPeriod(20),null===(w=k.accelerometerService)||void 0===w||w.addEventListener("accelerometerdatachanged",(function(e){var t=e.detail,c=t.x,o=t.y,f=t.z;n.accX=c,n.accY=o,n.accZ=f,s();var h=Math.sqrt(c*c+o*o+f*f)*r.height/10;a.fillStyle="red",a.clearRect(u,i,3,i),a.fillRect(u,i,2,h),u=(u+2)%r.width})),null===(g=k.buttonService)||void 0===g||g.addEventListener("buttonastatechanged",(function(e){n.btnA=e.detail,s()})),null===(y=k.buttonService)||void 0===y||y.addEventListener("buttonbstatechanged",(function(e){n.btnB=e.detail,s()})),e.abrupt("return",k);case 39:return e.prev=39,e.t3=e.catch(6),alert(e.t3.message||e.t3),e.abrupt("return",null);case 43:case"end":return e.stop()}}),e,null,[[6,39]])})))).apply(this,arguments)}function _(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),r=Object(a.useState)(null),n=Object(f.a)(r,2),i=n[0],u=n[1],c=Object(a.useCallback)((function(){e.current&&t.current&&function(e,t){return $.apply(this,arguments)}(e.current,t.current).then(u)}),[]),s=Object(a.useCallback)((function(){var e;(null===i||void 0===i?void 0:i.magnetometerService)&&(null===i||void 0===i||null===(e=i.magnetometerService)||void 0===e||e.calibrate())}),[null===i||void 0===i?void 0:i.magnetometerService]);return Object(K.jsxs)("div",{className:"App",children:[Object(K.jsx)("button",{onClick:c,children:"CONNECT"}),Object(K.jsx)("button",{onClick:s,disabled:!(null===i||void 0===i?void 0:i.magnetometerService),children:" CALIBRATE"}),Object(K.jsx)("div",{children:Object(K.jsx)("pre",{className:"Log",ref:e})}),Object(K.jsx)("canvas",{ref:t,width:"800",height:"200"})]})}var ee=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,24)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,u=t.getTTFB;r(e),n(e),a(e),i(e),u(e)}))};c.a.render(Object(K.jsx)(i.a.StrictMode,{children:Object(K.jsxs)("div",{children:[Object(K.jsx)(_,{}),Object(K.jsx)(_,{}),Object(K.jsx)(_,{}),Object(K.jsx)(_,{})]})}),document.getElementById("root")),ee()}},[[23,1,2]]]);
//# sourceMappingURL=main.f239d174.chunk.js.map